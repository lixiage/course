define(function(){var a=null,c=-1,h="/index/ajaxsearchbbs",v=0;OP_CONFIG&&"wenda"==OP_CONFIG.module&&"save"==OP_CONFIG.page&&(h="/index/ajaxwendasuggest",v=1);var _=function(_){var g=_;a&&clearTimeout(a),a=setTimeout(function(){$.trim(g.val())?$.ajax({type:"get",url:h,dataType:"json",data:{words:$.trim(g.val())},success:function(a){c=-1;var h=a.data.data;if(h&&0!=h.length){var _="<dt>类似的问题</dt>";if(0!=h.length)for(var i=0;i<h.length;i++){var C=h[i],b=80,w=70;0==v&&(0!=C.finished&&(b=70,w=60),0!=C.last_t_id&&(b=70,w=60),0!=C.finished&&0!=C.last_t_id&&(b=50,w=40));var k=C.title||C.description;k=$("<div/>").text(k).html().replace(/"/g,'"');var O=C.id,y=k.strLen()>b?k.subCHStr(0,w)+"..":k,T=C.answers,j="/wenda/detail/";2==C.type_id&&(j="/qadetail/",O=C.old_ques_id);var F="";0==v&&(0!=C.finished&&(F="已采纳回答"),0!=C.last_t_id&&(F="老师回答"),0!=C.finished&&0!=C.last_t_id&&(F="老师回答 已采纳回答")),k=k.replace(/"/g,""),_+='<dd title="'+k+'"><a  class="questiontitle" target="_blank" href="'+j+O+'">'+y+"<em>"+T+"个回答</em> <i>"+F+"</i></a></dd>"}$(".send-area-result").html(_).css("z-index",99999).show(),g.attr("data-old",g.val())}else $(".send-area-result").hide().html("")}}):$(".send-area-result").hide().html("")},400)},g=function(){var a=$(".send-area-result dd").removeClass("oncurr"),h="";c>-1&&(h=$(a.get(c)).addClass("oncurr").attr("title"))},C=function(){$(document).on({keydown:function(h){switch(a&&clearTimeout(a),h.keyCode){case 13:if(c>-1)return $(".send-area-result dd").eq(c).find("a")[0].click(),!1;var v=$.trim($(this).val());if(!v)return!1;$(".send-area-result").hide().html(""),c=-1;break;case 38:c=c>-1?c-1:$(".send-area-result dd").length-1,g();break;case 40:c=c<$(".send-area-result dd").length-1?c+1:-1,g();break;default:_($(this))}},focus:function(){$.trim($(this).val())&&_($(this))},blur:function(){setTimeout(function(){$(".send-area-result").hide().html("")},200)}},".autocomplete").on({mouseenter:function(){$(this).addClass("oncurr").siblings().removeClass("oncurr"),c=$(this).index()},mouseleave:function(){$(this).removeClass("oncurr"),c=-1}},".send-area-result dd")};C()});