define(function(require){require("common"),require("/static/component/logic/common/userinfo.js"),$.ajax({type:"GET",url:"/course/AjaxCourseMembers",data:{ids:GC.course.id},dataType:"json",success:function(a){if(0==a.result){var c=a.data[0];$(".js-learn-num").text(c.numbers)}}}),$.ajax({type:"GET",url:"/course/ajaxcourselearn",data:{cid:GC.course.id},dataType:"json",success:function(a){0==a.result?1==a.data?$(".js-follow-action").addClass("icon-star2").attr({"data-cid":GC.course.id,"data-cmd":"cancle",title:"取消收藏"}):$(".js-follow-action").addClass("icon-star_outline").attr({"data-cid":GC.course.id,"data-cmd":"follow",title:"收藏"}):-11==a.result&&$(".js-follow-action").addClass("icon-star_outline").attr({"data-cid":GC.course.id,"data-cmd":"follow",title:"收藏"})}});var a=new Array,c={getData:function(a,c,h){var g=this;$(a).each(function(v){$.ajax({type:"GET",url:"/course/"+a[v],data:{cid:GC.course.id},dataType:"json",success:function(a){if(0==a.result){var y=a.data;y.length&&("attentionrecom"==c[v]?g.attentionrecom(y,h):g.courserecom(y,h))}}})})},selectStyle:function(){var a=["blue","yellow","green","orange","lake-blue"],c=["fs20","fs18","fs16","fs14"],h=["normal","bold"],g=function(a){return index=parseInt(Math.floor(Math.random()*a.length))},v=a[g(a)],y=c[g(c)],b=h[g(h)],j=v+" "+y+" "+b,C={color:v,size:y,weight:b,className:j};return C},changeStyle:function(){var c=this;a.push(c.selectStyle());var h=a.length;if(h>4&&(a.shift(),h=a.length),h>1){var g=parseInt(h-1);$.each(a,function(i){return i==g||a[g].color!=a[i].color&&a[g].size!=a[i].size?void 0:(a.pop(),c.changeStyle())})}},attentionrecom:function(c,h){var g=this,v="";v+='<div class="box mb40 all-attention-box">                        <h4>大家都关注</h4>                            <div class="js-all-attention all-attention">',$(c).each(function(i){"undefined"!=typeof c[i].title&&(g.changeStyle(),v+='<a href="'+c[i].url+'" target="_blank" data-id="'+c[i].subject_id+'" class="'+a[a.length-1].className+'">'+c[i].title+"</a>")}),$(h).prepend(v)},courseCartColor:function(a){var c,h={blueArr:["CSS3","jquery","sassless","python","mysql","大数据","cloudcomputing","photoshop"],orangeArr:["html","html5","webapp","fetool"],greenArr:["nodejs","vuejs","C","C#","android","mongodb","test"],cyanArr:["bootstrap","Reactjs","C puls puls","Go","ios","Unity 3D","Cocos2d-x","maya"],purpleArr:["javascript","php","linux","premiere","ZBrush"],redArr:["angularjs","java","ruby","Oracle","SQL Server"]};return $.each(h,function(g){$.each(h[g],function(v){a==h[g][v]&&(c=g)})}),"blueArr"==c?"blue":"orangeArr"==c?"orange":"greenArr"==c?"green":"cyanArr"==c?"cyan":"purpleArr"==c?"purple":"redArr"==c?"red":"red"},courserecom:function(a,c){var h=this,g="";g+='<div class="box mb40 recom-course-list-box">                        <h4>推荐课程</h4>                        <ul class="js-recom-course recom-course-list clearfix">',$(a).each(function(i){var c=a[i];g+='<li class="clearfix">';var v="";"undefinded"!=typeof c.type&&(v=1==c.type?'<a href="//www.imooc.com/learn/'+c.id+'" class="clearfix" target="_blank">':'<a href="http://coding.imooc.com/class/'+c.id+'.html" class="clearfix" target="_blank">'),g+=v;var y="";if(y="undefined"!=typeof c.pic&&null!=c.pic?'<div class="l course-img" style="background-image: url('+c.pic+');">':'<div class="l course-img" style="background-image: url(//www.imooc.com/courseimg/s/cover015_s.jpg);">',g+=y,"undefinded"!=typeof c.skillname&&0!=c.skillname.length){var b=c.skillname,j=b[0],C=j.marking;if(b){var w=h.courseCartColor(C);g+='<div class="cart-color '+w+'"></div></div>'}}g+='<div class="l content-box">                            <p class="smalle-title">'+c.name+'</p>                            <p class="content-text" title="'+c.description+'">'+c.description+'</p>                            <div class="clearfix learn-detail">';var $="";1==c.easy_type?$="初级":2==c.easy_type?$="中级":3==c.easy_type&&($="高级"),g+=$+"<span>·</span>"+c.numbers+"人在学</div>                        </div>                    </a>                </li>"}),g+="</ul></div>",$(c).append(g)}};c.getData(["ajaxskillcourse","ajaxcoursenewrecom"],["attentionrecom","courserecom"],".js-recom-box")});